<div class="sidebar-inner">
    <div class="sidebar-header">
        <div class="logo-container">
            <div class="modern-logo">
                <img src="Info/Config/Assets/images/eeprep.png" alt="EE Prep Logo">
            </div>
            <h2 class="sidebar-title">EE Prep</h2>
        </div>
        <button class="sidebar-close hidden-desktop" aria-label="Close menu">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <div class="sidebar-search">
        <div class="search-wrapper">
            <input type="text" class="search-input" placeholder="Search topics..." aria-label="Search">
            <button class="search-button" aria-label="Search">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div class="search-results-dropdown"></div>
    </div>
    
    <nav class="sidebar-nav">
        <ul class="sidebar-menu">
            <li class="sidebar-item">
                <a href="index.html" class="sidebar-link" title="Home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="Topics.html" class="sidebar-link" title="Topics">
                    <i class="fas fa-book"></i>
                    <span>Topics</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="practice.html" class="sidebar-link" title="Practice">
                    <i class="fas fa-tasks"></i>
                    <span>Practice</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="about.html" class="sidebar-link" title="About">
                    <i class="fas fa-info-circle"></i>
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <div class="sidebar-footer">
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode" title="Toggle Theme">
            <i class="fas fa-moon"></i>
            <span>Toggle Theme</span>
        </button>
        <div class="sidebar-info">
            <small><i>For the aspiring engineer</i></small>
        </div>
    </div>
</div>

<!-- Update sidebar toggle button text -->
<button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar" title="Collapse sidebar">
    <i class="fas fa-chevron-left"></i>
</button>

<script>
    // Sidebar close button (mobile)
    const closeButton = document.querySelector('.sidebar-close');
    if (closeButton) {
        closeButton.addEventListener('click', () => {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            if (sidebar) sidebar.classList.remove('active');
            if (overlay) overlay.classList.remove('active');
            document.body.classList.remove('sidebar-open');
            
            // Find and update the mobile toggle button icon
            const mobileToggle = document.querySelector('.mobile-nav-toggle');
            if (mobileToggle && mobileToggle.querySelector('i')) {
                mobileToggle.querySelector('i').className = 'fas fa-bars';
            }
        });
    }
    
    // Sidebar toggle (desktop) - improved implementation
    const sidebarToggle = document.getElementById('sidebar-toggle');
    if (sidebarToggle) {
        // Update icon based on current state
        function updateToggleIcon() {
            const icon = sidebarToggle.querySelector('i');
            if (document.body.classList.contains('sidebar-collapsed')) {
                icon.className = 'fas fa-chevron-right';
                sidebarToggle.setAttribute('title', 'Expand sidebar');
            } else {
                icon.className = 'fas fa-chevron-left';
                sidebarToggle.setAttribute('title', 'Collapse sidebar');
            }
        }
        
        // Initialize icon
        updateToggleIcon();
        
        // Add click handler with improved functionality for icon-only mode
        sidebarToggle.addEventListener('click', () => {
            console.log('Sidebar toggle clicked'); // Debug logging
            
            // Toggle the collapsed state (now for icon-only mode)
            document.body.classList.toggle('sidebar-collapsed');
            
            // If sidebar was collapsed, make sure it's now visible
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                if (!document.body.classList.contains('sidebar-collapsed')) {
                    console.log('Making sidebar visible'); // Debug logging
                    sidebar.classList.add('active');
                } else {
                    console.log('Hiding sidebar'); // Debug logging
                }
            }
            
            updateToggleIcon();
            
            // Store preference
            localStorage.setItem('sidebar-collapsed', 
                document.body.classList.contains('sidebar-collapsed'));
        });
        
        // Make button more noticeable with additional effect
        setTimeout(() => {
            sidebarToggle.classList.add('attention');
            setTimeout(() => {
                sidebarToggle.classList.remove('attention');
            }, 2000);
        }, 1000);
    }
</script>
