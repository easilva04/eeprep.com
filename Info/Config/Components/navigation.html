<!-- Navbar Component -->
<nav class="navbar">
    <div class="navbar-left">
        <button class="hamburger-menu" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <h1 class="navbar-title">
            <a href="/index.html">
                <span class="title-full">Electrical Engineering Preparation</span>
                <span class="title-mobile">EE Prep</span>
            </a>
        </h1>
    </div>
    <div class="navbar-right">
        <div class="search-container">
            <button class="search-icon" id="search-button" aria-label="Search">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M15.5 14H14.71L14.43 13.73C15.63 12.33 16.25 10.42 15.91 8.39C15.43 5.61 13.12 3.39 10.32 3.05C6.09 2.56 2.56 6.09 3.05 10.32C3.39 13.12 5.61 15.43 8.39 15.91C10.42 16.25 12.33 15.63 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9 14C6.79 14 5 12.21 5 10C5 7.79 6.79 6 9 6C11.21 6 13 7.79 13 10C13 12.21 11.21 14 9 14Z"
                        fill="currentColor" />
                </svg>
            </button>
            <input type="text" class="search-input" id="navbar-search-input" placeholder="Search...">
            <div class="search-suggestions"></div>
            <div class="search-dropdown"></div>
        </div>
    </div>
</nav>

<!-- Sidebar Component -->
<div id="sidebar-container" class="sidebar collapsed">
    <div class="sidebar-inner">
        <div class="sidebar-header">
            <img src="#" alt="EE Prep Logo" class="sidebar-logo" id="sidebar-logo">
            <button id="toggle-sidebar" aria-label="Toggle sidebar">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        
        <nav class="sidebar-nav">
            <ul>
                <li><a href="#" class="nav-link" onclick="navigateRelative('index.html')">Home</a></li>
                <li>
                    <a href="#" class="nav-link dropdown-toggle">Topics</a>
                    <ul class="dropdown-menu">
                        <li><a href="#" onclick="navigateRelative('Topics/Circuits/Circuits.html')">Circuits</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Communications/Communications.html')">Communications</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/ComputerSystems/ComputerSystems.html')">Computer Systems</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Controls/Controls.html')">Controls</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/DigitalSystems/DigitalSystems.html')">Digital Systems</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Economics/EngineeringEcon.html')">Economics</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/ElectricalMaterials/Materials.html')">Electrical Materials</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Electromagnetics/Electromagnetics.html')">Electromagnetics</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Electronics/Electronics.html')">Electronics</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Ethics/Ethics.html')">Ethics</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/LinearSystems/LinearSystems.html')">Linear Systems</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Math/Fundamentals/Math.html')">Math</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Networks/Networks.html')">Networks</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Power/Power.html')">Power</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/Signals/Signals.html')">Signals</a></li>
                        <li><a href="#" onclick="navigateRelative('Topics/SoftwareEngineering/SoftwareEngineering.html')">Software Engineering</a></li>
                    </ul>
                </li>
                <li><a href="#" class="nav-link" onclick="navigateRelative('about.html')">About</a></li>
                <li><a href="#" class="nav-link" onclick="navigateRelative('contact.html')">Contact</a></li>
            </ul>
        </nav>
        
        <div class="sidebar-search" id="search-container">
            <input type="text" id="search-input" placeholder="Search...">
            <div id="search-results" class="search-results"></div>
        </div>
        
        <div class="theme-controls">
            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </div>
        
        <!-- Footer content integrated into navigation -->
        <div class="sidebar-footer">
            <p>&copy; <span id="current-year"></span> EEPrep</p>
            <div class="sidebar-footer-links">
                <a href="#" onclick="navigateRelative('privacy.html')">Privacy</a>
                <a href="#" onclick="navigateRelative('terms.html')">Terms</a>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="../js/themeToggle.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Navbar search functionality
        const searchInput = document.getElementById('navbar-search-input');
        const searchButton = document.getElementById('search-button');
        
        function performSearch() {
            const query = searchInput.value.trim();
            if (query) {
                window.location.href = `/components/search.html?q=${encodeURIComponent(query)}`;
            }
        }
        
        searchButton.addEventListener('click', performSearch);
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // Footer year update
        document.getElementById('current-year') && 
        (document.getElementById('current-year').textContent = new Date().getFullYear());
    });

    // Set current year
    document.getElementById('current-year').textContent = new Date().getFullYear();
    
    // Set logo source based on current path
    function setLogoSource() {
        const basePath = getBasePath();
        const logoElement = document.getElementById('sidebar-logo');
        if (logoElement) {
            logoElement.src = `${basePath}/Info/Config/Assets/images/eeprep.png`;
        }
    }
    
    // Helper function to handle relative navigation from any page depth
    function navigateRelative(targetPath) {
        // Get the current path and calculate the relative path to root
        const basePath = getBasePath();
        
        // Navigate to the target path from the calculated base
        window.location.href = basePath + targetPath;
        return false; // Prevent default link behavior
    }
    
    // Initialize logo after sidebar is loaded
    setLogoSource();
</script>
